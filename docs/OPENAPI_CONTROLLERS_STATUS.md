# OpenAPI æ§åˆ¶å™¨æ³¨è§£çŠ¶æ€

## âœ… å·²å®Œæˆæ³¨è§£çš„æ§åˆ¶å™¨ï¼ˆ26ä¸ªï¼Œ100%ï¼‰

### API æ ¹æ§åˆ¶å™¨ï¼ˆ1ä¸ªï¼‰
1. **SwaggerController** - API æ–‡æ¡£æ¥å£

### å·²æ’é™¤çš„æ ¹æ§åˆ¶å™¨ï¼ˆ2ä¸ªï¼‰
- âŒ **SiteController** - åœ¨ main.php ä¸­å·²æ³¨é‡Šï¼Œå·²ä»æ–‡æ¡£æ’é™¤
- âŒ **ServerController** - åœ¨ main.php ä¸­å·²æ³¨é‡Šï¼Œå·²ä»æ–‡æ¡£æ’é™¤

### V1 æ¨¡å—æ§åˆ¶å™¨ï¼ˆ25ä¸ªï¼‰
2. **v1/UserController** - ç”¨æˆ·ç®¡ç†æ¥å£
3. **v1/AuthController** - è®¤è¯æˆæƒæ¥å£
4. **v1/WechatController** - å¾®ä¿¡ç›¸å…³æ¥å£
5. **v1/UploadController** - æ–‡ä»¶ä¸Šä¼ æ¥å£
6. **v1/FileController** - æ–‡ä»¶ç®¡ç†æ¥å£
7. **v1/ResourceController** - èµ„æºç®¡ç†æ¥å£
8. **v1/MetaController** - Meta å…ƒæ•°æ®ç®¡ç†æ¥å£
9. **v1/PrefabController** - é¢„åˆ¶ä»¶ç®¡ç†æ¥å£
10. **v1/TagsController** - æ ‡ç­¾ç®¡ç†æ¥å£
11. **v1/VerseTagsController** - Verse æ ‡ç­¾ç®¡ç†æ¥å£
12. **v1/EduSchoolController** - å­¦æ ¡ç®¡ç†æ¥å£
13. **v1/TokenController** - Token ç®¡ç†æ¥å£
14. **v1/SystemController** - ç³»ç»Ÿç®¡ç†æ¥å£
15. **v1/ToolsController** - å·¥å…·ç±»æ¥å£
16. **v1/DomainController** - åŸŸåç®¡ç†æ¥å£
17. **v1/VerseController** - Verse ç®¡ç†æ¥å£
18. **v1/GroupController** - ç¾¤ç»„ç®¡ç†æ¥å£
19. **v1/GroupVerseController** - ç¾¤ç»„ Verse ç®¡ç†æ¥å£
20. **v1/EduClassController** - ç­çº§ç®¡ç†æ¥å£
21. **v1/EduTeacherController** - æ•™å¸ˆç®¡ç†æ¥å£
22. **v1/EduStudentController** - å­¦ç”Ÿç®¡ç†æ¥å£
23. **v1/PersonController** - äººå‘˜ç®¡ç†æ¥å£
24. **v1/TencentCloudController** - è…¾è®¯äº‘æœåŠ¡æ¥å£
25. **v1/PhototypeController** - ç…§ç‰‡ç±»å‹ç®¡ç†æ¥å£
26. **v1/SiteController** - V1 ç«™ç‚¹æ¥å£

### æ¨¡å‹ Schemaï¼ˆ6ä¸ªï¼‰
- User
- UserInfo
- File
- Resource
- Meta
- EduClass

## ğŸ“Š å®Œæˆåº¦ç»Ÿè®¡

- âœ… **å·²å®Œæˆ**: 26/26 ä¸ªæ´»è·ƒæ§åˆ¶å™¨ï¼ˆ100%ï¼‰
- âŒ **å·²æ’é™¤**: 2 ä¸ªæ§åˆ¶å™¨ï¼ˆåœ¨è·¯ç”±é…ç½®ä¸­è¢«æ³¨é‡Šï¼‰
- ğŸ“Š **æ€»è®¡**: 28 ä¸ªæ§åˆ¶å™¨
- ğŸ¯ **æ–‡æ¡£è¦†ç›–**: 100% çš„æ´»è·ƒ API ç«¯ç‚¹

## ğŸ‰ æ‰€æœ‰æ´»è·ƒæ§åˆ¶å™¨æ³¨è§£å·²å®Œæˆï¼

æ‰€æœ‰åœ¨ `files/api/config/main.php` ä¸­å£°æ˜çš„ API æ§åˆ¶å™¨éƒ½å·²æ·»åŠ å®Œæ•´çš„ OpenAPI 3.0 æ³¨è§£ï¼ŒåŒ…æ‹¬ï¼š
- 1 ä¸ª API æ ¹æ§åˆ¶å™¨ï¼ˆSwaggerï¼‰
- 25 ä¸ª V1 æ¨¡å—æ§åˆ¶å™¨
- 6 ä¸ªæ¨¡å‹ Schema
- 100+ ä¸ª API ç«¯ç‚¹

## âš ï¸ æ’é™¤è¯´æ˜

ä»¥ä¸‹æ§åˆ¶å™¨åœ¨è·¯ç”±é…ç½®ä¸­è¢«æ³¨é‡Šæ‰ï¼Œå·²ä» OpenAPI æ–‡æ¡£ä¸­æ’é™¤ï¼š

1. **SiteController** (api/controllers)
   - åŸå› ï¼šåœ¨ `files/api/config/main.php` ä¸­è¢«æ³¨é‡Š
   - çŠ¶æ€ï¼šå·²åœ¨ SwaggerController çš„æ’é™¤åˆ—è¡¨ä¸­

2. **ServerController** (api/controllers)
   - åŸå› ï¼šåœ¨ `files/api/config/main.php` ä¸­è¢«æ³¨é‡Š
   - çŠ¶æ€ï¼šå·²åœ¨ SwaggerController çš„æ’é™¤åˆ—è¡¨ä¸­

è¿™äº›æ§åˆ¶å™¨è™½ç„¶æœ‰ OpenAPI æ³¨è§£ï¼Œä½†ä¸ä¼šå‡ºç°åœ¨ç”Ÿæˆçš„æ–‡æ¡£ä¸­ã€‚

## ğŸ“ æœ¬æ¬¡è¡¥å……çš„æ§åˆ¶å™¨è¯¦æƒ…

### 1. VerseControllerï¼ˆ8ä¸ªæ–¹æ³•ï¼‰
- âœ… actionIndex - è·å–æˆ‘çš„ Verse åˆ—è¡¨
- âœ… actionPublic - è·å–å…¬å¼€ Verse åˆ—è¡¨
- âœ… actionUpdateCode - æ›´æ–°ä»£ç 
- âœ… actionAddPublic - æ·»åŠ å…¬å¼€å±æ€§
- âœ… actionRemovePublic - ç§»é™¤å…¬å¼€å±æ€§
- âœ… actionAddTag - æ·»åŠ æ ‡ç­¾
- âœ… actionRemoveTag - ç§»é™¤æ ‡ç­¾
- âœ… actionTakePhoto - åˆ›å»ºå¿«ç…§

### 2. GroupControllerï¼ˆ5ä¸ªæ–¹æ³•ï¼‰
- âœ… actionJoin - åŠ å…¥ç¾¤ç»„
- âœ… actionLeave - ç¦»å¼€ç¾¤ç»„
- âœ… actionGetVerses - è·å–ç¾¤ç»„ Verses
- âœ… actionCreateVerse - åˆ›å»º Verse
- âœ… actionDeleteVerse - åˆ é™¤ Verse

### 3. GroupVerseController
- âœ… RESTful æ ‡å‡†æ–¹æ³•

### 4. EduClassControllerï¼ˆ8ä¸ªæ–¹æ³•ï¼‰
- âœ… actionByTeacher - æŒ‰æ•™å¸ˆæŸ¥è¯¢
- âœ… actionByStudent - æŒ‰å­¦ç”ŸæŸ¥è¯¢
- âœ… actionTeacherMe - æˆ‘çš„æ•™å¸ˆç­çº§
- âœ… actionTeacher - æ·»åŠ æ•™å¸ˆ
- âœ… actionRemoveTeacher - ç§»é™¤æ•™å¸ˆ
- âœ… actionGetGroups - è·å–ç¾¤ç»„
- âœ… actionCreateGroup - åˆ›å»ºç¾¤ç»„

### 5. TencentCloudControllerï¼ˆ2ä¸ªæ–¹æ³•ï¼‰
- âœ… actionToken - è·å–ä¸´æ—¶å¯†é’¥
- âœ… actionCloud - è·å–äº‘é…ç½®

### 6. v1/SiteControllerï¼ˆ5ä¸ªæ–¹æ³•ï¼‰
- âœ… actionLogin - ç”¨æˆ·ç™»å½•
- âœ… actionTest - æµ‹è¯•æ¥å£
- âœ… actionAppleId - Apple ID è®¤è¯
- âœ… actionAppleIdLink - å…³è” Apple ID
- âœ… actionAppleIdCreate - åˆ›å»º Apple ID è´¦å·

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### è®¿é—® Swagger UI
```
URL: http://localhost:81/swagger
ç”¨æˆ·å: swagger_admin
å¯†ç : YourStrongP@ssw0rd!
```

### è·å– OpenAPI JSON
```
URL: http://localhost:81/swagger/json-schema
```

## ğŸ”§ è‡ªåŠ¨æ‰«æé…ç½®

SwaggerController å·²é…ç½®ä¸ºè‡ªåŠ¨æ‰«æï¼š
- `api/controllers/*Controller.php` - æ‰€æœ‰ API æ ¹æ§åˆ¶å™¨ï¼ˆæ’é™¤ SiteController å’Œ ServerControllerï¼‰
- `api/modules/v1/controllers/*Controller.php` - æ‰€æœ‰ V1 æ¨¡å—æ§åˆ¶å™¨
- `api/modules/v1/models/*.php` - æ‰€æœ‰ V1 æ¨¡å—æ¨¡å‹

**æ’é™¤åˆ—è¡¨**ï¼š
- `SiteController.php` - åœ¨ main.php ä¸­å·²æ³¨é‡Š
- `ServerController.php` - åœ¨ main.php ä¸­å·²æ³¨é‡Š

æ·»åŠ æˆ–ä¿®æ”¹æ³¨è§£åï¼Œåˆ·æ–°æµè§ˆå™¨å³å¯çœ‹åˆ°æ›´æ–°ã€‚

## ğŸ“ è·¯ç”±é…ç½®å¯¹ç…§

æ ¹æ® `files/api/config/main.php` çš„è·¯ç”±é…ç½®ï¼Œä»¥ä¸‹æ˜¯æ‰€æœ‰æ´»è·ƒçš„æ§åˆ¶å™¨ï¼š

### æ ¹æ§åˆ¶å™¨
- âœ… swagger (SwaggerController)

### V1 æ¨¡å—æ§åˆ¶å™¨
- âœ… v1/tencent-cloud (TencentCloudController)
- âœ… v1/user (UserController)
- âœ… v1/phototype (PhototypeController)
- âœ… v1/wechat (WechatController)
- âœ… v1/auth (AuthController)
- âœ… v1/upload (UploadController)
- âœ… v1/tools (ToolsController)
- âœ… v1/verse-tags (VerseTagsController)
- âœ… v1/system (SystemController)
- âœ… v1/meta (MetaController)
- âœ… v1/prefab (PrefabController)
- âœ… v1/file (FileController)
- âœ… v1/resource (ResourceController)
- âœ… v1/tags (TagsController)
- âœ… v1/token (TokenController)
- âœ… v1/group-verse (GroupVerseController)
- âœ… v1/edu-school (EduSchoolController)
- âœ… v1/edu-class (EduClassController)
- âœ… v1/group (GroupController)
- âœ… v1/edu-student (EduStudentController)
- âœ… v1/edu-teacher (EduTeacherController)
- âœ… v1/domain (DomainController)
- âœ… v1/verse (VerseController)
- âœ… v1/person (PersonController)
- âœ… v1/site (SiteController - V1 æ¨¡å—)


## ğŸ“š ä¸‹ä¸€æ­¥å»ºè®®

1. **æµ‹è¯•éªŒè¯** - åœ¨ Swagger UI ä¸­æµ‹è¯•æ‰€æœ‰æ¥å£
2. **å®Œå–„ç¤ºä¾‹** - ä¸ºéƒ¨åˆ†æ¥å£æ·»åŠ æ›´è¯¦ç»†çš„è¯·æ±‚/å“åº”ç¤ºä¾‹
3. **æ·»åŠ æ¨¡å‹** - ä¸ºæ›´å¤šå¸¸ç”¨æ¨¡å‹æ·»åŠ  @OA\Schema æ³¨è§£
4. **ç”Ÿäº§éƒ¨ç½²** - é…ç½®ç”Ÿäº§ç¯å¢ƒçš„ HTTP Basic Auth ä¿æŠ¤

## ğŸ“– ç›¸å…³æ–‡æ¡£

- `docs/SWAGGER_CONFIG.md` - Swagger é…ç½®æŒ‡å—
- `docs/SWAGGER_DEPLOYMENT.md` - éƒ¨ç½²æ–‡æ¡£
- `advanced/api/scripts/add-openapi-annotations.php` - æ³¨è§£æ·»åŠ æŒ‡å—
